ZDOTDIR=~/dotfiles-mac/zsh

# 基本設定
source $ZDOTDIR/exports.sh
source $ZDOTDIR/aliases.sh

# functions（autoload）
FUNCTIONS_DIR="$ZDOTDIR/functions"
fpath=($FUNCTIONS_DIR $fpath)
for f in $FUNCTIONS_DIR/*(.N); do
  autoload -Uz "${f:t}"
done

# プラグイン読み込み
for plugin in $ZDOTDIR/plugins/*.zsh(N) $ZDOTDIR/plugins/*/*.zsh(N); do
  source "$plugin"
done

# 補完 (compinit)
autoload -Uz compinit && compinit

# zsh-syntax-highlighting
source $ZDOTDIR/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh

# テーマ
source $ZDOTDIR/themes/my-zsh-theme

# 挙動設定
setopt interactive_comments
setopt no_beep

# iTerm2
test -e "${HOME}/.iterm2_shell_integration.zsh" && source "${HOME}/.iterm2_shell_integration.zsh"

# fzf (補完・キーバインド)
if command -v fzf >/dev/null 2>&1; then
  source <(fzf --zsh)
fi

# zoxide (cd互換モード)
if command -v zoxide >/dev/null 2>&1; then
  eval "$(zoxide init zsh --cmd cd)"
fi

# ログアウトスクリプトを有効にする
setopt monitor