ZDOTDIR=~/dotfiles-mac/zsh

# basic settings
source $ZDOTDIR/exports.sh
source $ZDOTDIR/aliases.sh

# functions（autoload）
FUNCTIONS_DIR="$ZDOTDIR/functions"
fpath=($FUNCTIONS_DIR $fpath)
for f in $FUNCTIONS_DIR/*(.N); do
  autoload -Uz "${f:t}"
done

# zsh-completions
fpath=($(brew --prefix)/share/zsh-completions $fpath)

# complement
autoload -Uz compinit && compinit

# zsh-autosuggestions
source "$(brew --prefix)/share/zsh-autosuggestions/zsh-autosuggestions.zsh"

# themes
eval "$(starship init zsh)"

# zsh-syntax-highlighting
source "$(brew --prefix)/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh"

# History search with arrow keys
autoload -Uz up-line-or-beginning-search down-line-or-beginning-search
zle -N up-line-or-beginning-search
zle -N down-line-or-beginning-search
bindkey "^[[A" up-line-or-beginning-search
bindkey "^[[B" down-line-or-beginning-search

# 挙動設定
setopt interactive_comments
setopt no_beep

# fzf
if command -v fzf >/dev/null 2>&1; then
  source <(fzf --zsh)
fi

# zoxide
if command -v zoxide >/dev/null 2>&1; then
  eval "$(zoxide init zsh --cmd cd)"
fi

# pyenv
if command -v pyenv >/dev/null 2>&1; then
  eval "$(pyenv init -)"
  eval "$(pyenv virtualenv-init -)"
fi
